<!doctype html><html><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>è¯•ç”¨æœ€æ–°çš„ Docker for Mac Beta - Timon Wong</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="DEPRECATION: ç°åœ¨ Docker for Mac å·²ç»å¯ä»¥é€šè¿‡ç•Œé¢é…ç½® mirror äº†ï¼Œè¿™ç‰‡æ–‡ç« ä½œåºŸ
å¦‚ä½•ç”³è¯· Docker for Mac Beta è¯·è®¿é—®è¿™ä¸ªåœ°å€ç”³è¯·ï¼Œå¯èƒ½éœ€è¦ç­‰å‡ å¤©ï¼šhttps://beta.docker.com/
Docker for Mac Betaï¼Œæœ€å¤§çš„å¥½å¤„å°±æ˜¯ä¸å†ä¾èµ– VirtualBox VM äº†ï¼Œè€Œæ˜¯ä½¿ç”¨äº†æ›´è½»é‡åŒ–çš„ xhyve ä½œä¸ºå…¶è™šæ‹ŸåŒ–æ–¹æ¡ˆï¼ˆä¹Ÿå³æ˜¯è¯´ï¼Œä»ç„¶ä¸æ˜¯åŸç”Ÿçš„ï¼Œè¿˜æ˜¯éœ€è¦è™šæ‹ŸåŒ–ä¸€ä¸ª Linux å‡ºæ¥åœ¨ä¸Šé¢è¿è¡Œ Docker Daemonï¼‰ã€‚
å¦å¤–ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„ Docker for Mac ä½¿ç”¨äº† Alpine Linux å‘è¡Œç‰ˆï¼Œä½œä¸ºä¸€ä¸ªæ›´è½»é‡åŒ–çš„å‘è¡Œç‰ˆï¼Œä¸ä¸€èˆ¬çš„å‘è¡Œç‰ˆæœ‰ä¸å°‘åŒºåˆ«ï¼Œæ¯”å¦‚ï¼Œä½¿ç”¨ ash æ›¿æ¢ bash ç­‰ï¼Œå…·ä½“è¯·è®¿é—® Alpine Linux ç½‘ç«™è·å–æ›´å¤šä¿¡æ¯ã€‚
ä½¿ç”¨ Docker Hub Registry Mirror ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œåœ¨å›½å†…è®¿é—® Docker Hub çš„é€Ÿåº¦ç›¸å½“ç¼“æ…¢ï¼Œå› æ­¤éœ€è¦è®¾ç½®ä¸€ä¸ª Docker Registry Mirror æ¥åŠ é€Ÿï¼Œè¿™é‡Œä½¿ç”¨ USTC çš„ Docker Hub Mirrorã€‚
å°±å¦‚åŒä¹‹å‰æ‰€è¯´ï¼ŒAlpine Linux å‘è¡Œç‰ˆä¸ä¸€èˆ¬å‘è¡Œç‰ˆæœ‰å·¨å¤§åŒºåˆ«ï¼Œå› æ­¤è°ƒæ•´ Docker Daemon çš„å¯åŠ¨å‚æ•°ä¹Ÿä¸å¤§ä¸€æ ·ğŸ˜‚
Quick Way NOTE: å®‰è£…äº† jq å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¯ä»¥é€šè¿‡ brew install jq å®‰è£…ï¼‰ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œä¸€è¡Œå‘½ä»¤è¡Œæå®šï¼Œå¦åˆ™è¯·å‚é˜…ã€ŒSlow Wayã€ä¸€èŠ‚ï¼š">
<meta property="og:image" content>
<meta property="og:title" content="è¯•ç”¨æœ€æ–°çš„ Docker for Mac Beta">
<meta property="og:description" content="DEPRECATION: ç°åœ¨ Docker for Mac å·²ç»å¯ä»¥é€šè¿‡ç•Œé¢é…ç½® mirror äº†ï¼Œè¿™ç‰‡æ–‡ç« ä½œåºŸ
å¦‚ä½•ç”³è¯· Docker for Mac Beta è¯·è®¿é—®è¿™ä¸ªåœ°å€ç”³è¯·ï¼Œå¯èƒ½éœ€è¦ç­‰å‡ å¤©ï¼šhttps://beta.docker.com/
Docker for Mac Betaï¼Œæœ€å¤§çš„å¥½å¤„å°±æ˜¯ä¸å†ä¾èµ– VirtualBox VM äº†ï¼Œè€Œæ˜¯ä½¿ç”¨äº†æ›´è½»é‡åŒ–çš„ xhyve ä½œä¸ºå…¶è™šæ‹ŸåŒ–æ–¹æ¡ˆï¼ˆä¹Ÿå³æ˜¯è¯´ï¼Œä»ç„¶ä¸æ˜¯åŸç”Ÿçš„ï¼Œè¿˜æ˜¯éœ€è¦è™šæ‹ŸåŒ–ä¸€ä¸ª Linux å‡ºæ¥åœ¨ä¸Šé¢è¿è¡Œ Docker Daemonï¼‰ã€‚
å¦å¤–ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„ Docker for Mac ä½¿ç”¨äº† Alpine Linux å‘è¡Œç‰ˆï¼Œä½œä¸ºä¸€ä¸ªæ›´è½»é‡åŒ–çš„å‘è¡Œç‰ˆï¼Œä¸ä¸€èˆ¬çš„å‘è¡Œç‰ˆæœ‰ä¸å°‘åŒºåˆ«ï¼Œæ¯”å¦‚ï¼Œä½¿ç”¨ ash æ›¿æ¢ bash ç­‰ï¼Œå…·ä½“è¯·è®¿é—® Alpine Linux ç½‘ç«™è·å–æ›´å¤šä¿¡æ¯ã€‚
ä½¿ç”¨ Docker Hub Registry Mirror ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œåœ¨å›½å†…è®¿é—® Docker Hub çš„é€Ÿåº¦ç›¸å½“ç¼“æ…¢ï¼Œå› æ­¤éœ€è¦è®¾ç½®ä¸€ä¸ª Docker Registry Mirror æ¥åŠ é€Ÿï¼Œè¿™é‡Œä½¿ç”¨ USTC çš„ Docker Hub Mirrorã€‚
å°±å¦‚åŒä¹‹å‰æ‰€è¯´ï¼ŒAlpine Linux å‘è¡Œç‰ˆä¸ä¸€èˆ¬å‘è¡Œç‰ˆæœ‰å·¨å¤§åŒºåˆ«ï¼Œå› æ­¤è°ƒæ•´ Docker Daemon çš„å¯åŠ¨å‚æ•°ä¹Ÿä¸å¤§ä¸€æ ·ğŸ˜‚
Quick Way NOTE: å®‰è£…äº† jq å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¯ä»¥é€šè¿‡ brew install jq å®‰è£…ï¼‰ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œä¸€è¡Œå‘½ä»¤è¡Œæå®šï¼Œå¦åˆ™è¯·å‚é˜…ã€ŒSlow Wayã€ä¸€èŠ‚ï¼š">
<meta property="og:type" content="article">
<meta property="og:url" content="https://theo.im/blog/2016/05/22/evaluating-new-docker-for-mac-beta/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2016-05-22T21:47:02+00:00">
<meta property="article:modified_time" content="2016-05-22T21:47:02+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="è¯•ç”¨æœ€æ–°çš„ Docker for Mac Beta">
<meta name=twitter:description content="DEPRECATION: ç°åœ¨ Docker for Mac å·²ç»å¯ä»¥é€šè¿‡ç•Œé¢é…ç½® mirror äº†ï¼Œè¿™ç‰‡æ–‡ç« ä½œåºŸ
å¦‚ä½•ç”³è¯· Docker for Mac Beta è¯·è®¿é—®è¿™ä¸ªåœ°å€ç”³è¯·ï¼Œå¯èƒ½éœ€è¦ç­‰å‡ å¤©ï¼šhttps://beta.docker.com/
Docker for Mac Betaï¼Œæœ€å¤§çš„å¥½å¤„å°±æ˜¯ä¸å†ä¾èµ– VirtualBox VM äº†ï¼Œè€Œæ˜¯ä½¿ç”¨äº†æ›´è½»é‡åŒ–çš„ xhyve ä½œä¸ºå…¶è™šæ‹ŸåŒ–æ–¹æ¡ˆï¼ˆä¹Ÿå³æ˜¯è¯´ï¼Œä»ç„¶ä¸æ˜¯åŸç”Ÿçš„ï¼Œè¿˜æ˜¯éœ€è¦è™šæ‹ŸåŒ–ä¸€ä¸ª Linux å‡ºæ¥åœ¨ä¸Šé¢è¿è¡Œ Docker Daemonï¼‰ã€‚
å¦å¤–ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„ Docker for Mac ä½¿ç”¨äº† Alpine Linux å‘è¡Œç‰ˆï¼Œä½œä¸ºä¸€ä¸ªæ›´è½»é‡åŒ–çš„å‘è¡Œç‰ˆï¼Œä¸ä¸€èˆ¬çš„å‘è¡Œç‰ˆæœ‰ä¸å°‘åŒºåˆ«ï¼Œæ¯”å¦‚ï¼Œä½¿ç”¨ ash æ›¿æ¢ bash ç­‰ï¼Œå…·ä½“è¯·è®¿é—® Alpine Linux ç½‘ç«™è·å–æ›´å¤šä¿¡æ¯ã€‚
ä½¿ç”¨ Docker Hub Registry Mirror ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œåœ¨å›½å†…è®¿é—® Docker Hub çš„é€Ÿåº¦ç›¸å½“ç¼“æ…¢ï¼Œå› æ­¤éœ€è¦è®¾ç½®ä¸€ä¸ª Docker Registry Mirror æ¥åŠ é€Ÿï¼Œè¿™é‡Œä½¿ç”¨ USTC çš„ Docker Hub Mirrorã€‚
å°±å¦‚åŒä¹‹å‰æ‰€è¯´ï¼ŒAlpine Linux å‘è¡Œç‰ˆä¸ä¸€èˆ¬å‘è¡Œç‰ˆæœ‰å·¨å¤§åŒºåˆ«ï¼Œå› æ­¤è°ƒæ•´ Docker Daemon çš„å¯åŠ¨å‚æ•°ä¹Ÿä¸å¤§ä¸€æ ·ğŸ˜‚
Quick Way NOTE: å®‰è£…äº† jq å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¯ä»¥é€šè¿‡ brew install jq å®‰è£…ï¼‰ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œä¸€è¡Œå‘½ä»¤è¡Œæå®šï¼Œå¦åˆ™è¯·å‚é˜…ã€ŒSlow Wayã€ä¸€èŠ‚ï¼š">
<script src=https://theo.im/js/feather.min.js></script>
<link href=https://theo.im/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet>
<link rel=stylesheet type=text/css media=screen href=https://theo.im/css/main.2f9b5946627215dc1ae7fa5f82bfc9cfcab000329136befeea5733f21e77d68f.css>
</head>
<body>
<div class=content><header>
<div class=main>
<a href=https://theo.im/>Timon Wong</a>
</div>
<nav>
<a href=/>Home</a>
<a href=/posts>Posts</a>
<a href=/tags>Tags</a>
</nav>
</header>
<main>
<article>
<div class=title>
<h1 class=title>è¯•ç”¨æœ€æ–°çš„ Docker for Mac Beta</h1>
<div class=meta>Posted on May 22, 2016</div>
</div>
<section class=body>
<p>DEPRECATION: ç°åœ¨ Docker for Mac å·²ç»å¯ä»¥é€šè¿‡ç•Œé¢é…ç½® mirror äº†ï¼Œè¿™ç‰‡æ–‡ç« ä½œåºŸ</p>
<h2 id=å¦‚ä½•ç”³è¯·-docker-for-mac-beta>å¦‚ä½•ç”³è¯· Docker for Mac Beta</h2>
<p>è¯·è®¿é—®è¿™ä¸ªåœ°å€ç”³è¯·ï¼Œå¯èƒ½éœ€è¦ç­‰å‡ å¤©ï¼šhttps://beta.docker.com/</p>
<p>Docker for Mac Betaï¼Œæœ€å¤§çš„å¥½å¤„å°±æ˜¯ä¸å†ä¾èµ– VirtualBox VM äº†ï¼Œè€Œæ˜¯ä½¿ç”¨äº†æ›´è½»é‡åŒ–çš„ <a href=https://github.com/mist64/xhyve>xhyve</a> ä½œä¸ºå…¶è™šæ‹ŸåŒ–æ–¹æ¡ˆï¼ˆä¹Ÿå³æ˜¯è¯´ï¼Œä»ç„¶ä¸æ˜¯åŸç”Ÿçš„ï¼Œè¿˜æ˜¯éœ€è¦è™šæ‹ŸåŒ–ä¸€ä¸ª Linux å‡ºæ¥åœ¨ä¸Šé¢è¿è¡Œ Docker Daemonï¼‰ã€‚</p>
<p>å¦å¤–ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„ Docker for Mac ä½¿ç”¨äº† <a href=http://alpinelinux.org/>Alpine Linux</a> å‘è¡Œç‰ˆï¼Œä½œä¸ºä¸€ä¸ªæ›´è½»é‡åŒ–çš„å‘è¡Œç‰ˆï¼Œä¸ä¸€èˆ¬çš„å‘è¡Œç‰ˆæœ‰ä¸å°‘åŒºåˆ«ï¼Œæ¯”å¦‚ï¼Œä½¿ç”¨ <code>ash</code> æ›¿æ¢ <code>bash</code> ç­‰ï¼Œå…·ä½“è¯·è®¿é—® <a href=http://alpinelinux.org/>Alpine Linux</a> ç½‘ç«™è·å–æ›´å¤šä¿¡æ¯ã€‚</p>
<h2 id=ä½¿ç”¨-docker-hub-registry-mirror>ä½¿ç”¨ Docker Hub Registry Mirror</h2>
<p>ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œåœ¨å›½å†…è®¿é—® Docker Hub çš„é€Ÿåº¦ç›¸å½“ç¼“æ…¢ï¼Œå› æ­¤éœ€è¦è®¾ç½®ä¸€ä¸ª Docker Registry Mirror æ¥åŠ é€Ÿï¼Œè¿™é‡Œä½¿ç”¨ <a href=https://servers.ustclug.org/2015/05/new-docker-hub-registry-mirror/>USTC çš„ Docker Hub Mirror</a>ã€‚</p>
<p>å°±å¦‚åŒä¹‹å‰æ‰€è¯´ï¼Œ<a href=http://alpinelinux.org/>Alpine Linux</a> å‘è¡Œç‰ˆä¸ä¸€èˆ¬å‘è¡Œç‰ˆæœ‰å·¨å¤§åŒºåˆ«ï¼Œå› æ­¤è°ƒæ•´ Docker Daemon çš„å¯åŠ¨å‚æ•°ä¹Ÿä¸å¤§ä¸€æ ·ğŸ˜‚</p>
<h3 id=quick-way>Quick Way</h3>
<p><strong>NOTE:</strong> å®‰è£…äº† <code>jq</code> å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¯ä»¥é€šè¿‡ <code>brew install jq</code> å®‰è£…ï¼‰ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œä¸€è¡Œå‘½ä»¤è¡Œæå®šï¼Œå¦åˆ™è¯·å‚é˜…ã€ŒSlow Wayã€ä¸€èŠ‚ï¼š</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pinata get daemon | jq -cM <span style=color:#e6db74>&#39;.&#34;registry-mirrors&#34; = [&#34;https://docker.mirrors.ustc.edu.cn&#34;]&#39;</span> | pinata set daemon -
</code></pre></div><h3 id=slow-way>Slow Way</h3>
<h4 id=1-å¯¼å‡ºå½“å‰çš„è®¾ç½®>1. å¯¼å‡ºå½“å‰çš„è®¾ç½®</h4>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†å½“å‰è®¾ç½®ä¿å­˜åˆ° <code>docker-config.json</code> æ–‡ä»¶ä¸­ï¼š</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pinata get daemon &gt; docker-config.json
<span style=color:#75715e>## &gt;&gt; {&#34;storage-driver&#34;:&#34;aufs&#34;,&#34;debug&#34;:true}</span>
</code></pre></div><h4 id=2-ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘è®¾ç½®>2. ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘è®¾ç½®</h4>
<p>ä½¿ç”¨ä»»ä½•ä¸€ç§æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ‰“å¼€ <code>docker-config.json</code> å¹¶æŒ‰ç…§ <code>JSON</code> æ ¼å¼ç¼–è¾‘ä¸ºä»¥ä¸‹å†…å®¹ï¼Œç„¶åä¿å­˜å¹¶é€€å‡ºï¼š</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{<span style=color:#f92672>&#34;storage-driver&#34;</span>:<span style=color:#e6db74>&#34;aufs&#34;</span>,<span style=color:#f92672>&#34;debug&#34;</span>:<span style=color:#66d9ef>true</span>,<span style=color:#f92672>&#34;registry-mirrors&#34;</span>:[<span style=color:#e6db74>&#34;https://docker.mirrors.ustc.edu.cn&#34;</span>]}
</code></pre></div><h4 id=3-åŠ è½½æœ€æ–°è®¾ç½®>3. åŠ è½½æœ€æ–°è®¾ç½®</h4>
<p>æœ€åï¼ŒåŠ è½½ <code>docker-config.json</code> ä¸­çš„è®¾ç½®å°±å¯ä»¥äº†ï¼š</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>pinata</span> <span style=color:#960050;background-color:#1e0010>set</span> <span style=color:#960050;background-color:#1e0010>daemon</span> <span style=color:#960050;background-color:#1e0010>@docker-config.json</span>
</code></pre></div><h2 id=è·å–-docker-guest-çš„-ip-åœ°å€>è·å– Docker Guest çš„ IP åœ°å€</h2>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¾—åˆ° Docker Guest çš„ IP åœ°å€ï¼Œå…¶å®ä¸å¤§æœ‰æ¯”è¾ƒå¿«æ·çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼Œå…ˆè¿è¡Œ <code>pinata get network</code>ï¼Œå±…ç„¶è¿”å›è¿™ä¸ªï¼Ÿï¼ŸWTFï¼Ÿï¼</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hostnet
</code></pre></div><p>ç„¶ååªæœ‰è¿è¡Œ <code>pinata list</code> äº†ï¼š</p>
<pre><code>These are advanced configuration settings to customise Docker.app on MacOSX.
You can set them via pinata set &lt;key&gt; &lt;value&gt; &lt;options&gt;.

ğŸ³  hostname = docker
   Hostname of the virtual machine endpoint, where container ports will be
   exposed if using nat networking. Access it via 'docker.local'.

ğŸ³  hypervisor = native (memory=2, ncpu=2)
   The Docker.app includes embedded hypervisors that run the virtual machines
   that power the containers. This setting allows you to control which the
   default one used for Linux is.

 â–¸  native: a version of the xhyve hypervisor that uses the MacOSX
              Hypervisor.framework to run container VMs. Parameters:
              memory (VM memory in gigabytes), ncpu (vCPUs)


ğŸ³  network = hostnet (docker-ipv4=192.168.65.2, host-ipv4=192.168.65.1)
   Controls how local containers can access the external network via the
   MacOS X host. This includes outbound traffic as well as publishing ports
   for external access to the local containers.

 â–¸ hostnet: a mode that helps if you are using a VPN that restricts
              connectivity. Activating this mode will proxy container network
              packets via the Docker.app process as host socket traffic.
              Parameters: docker-ipv4 (docker node), host-ipv4 (host node)
 â–¸     nat: a mode that uses the MacOS X vmnet.framework to route container
              traffic to the host network via a NAT.

ğŸ³  filesystem = osxfs
   Controls the mode by which files from the MacOS X host and the container
   filesystem are shared with each other.

 â–¸   osxfs: a FUSE-based filesystem that bidirectionally forwards OSX
              filesystem events into the container.


ğŸ³  native/port-forwarding = true
   Expose container ports on the Mac, rather than the VM

 â–¸    true: Container ports will be exposed on the Mac
 â–¸   false: Container ports will be exposed on the VM

ğŸ³  daemon = run 'pinata get daemon' or 'pinata set daemon [@file|-]&gt;
   JSON configuration of the local Docker daemon. Configure any custom
   options you need as documented in:
   https://docs.docker.com/engine/reference/commandline/daemon/. Set it
   directly, or a @file or - for stdin.
</code></pre>
<p>å› æ­¤çœ‹èµ·æ¥ä½¿ç”¨ <code>pinata list | grep 'network ='</code> æ‰æ˜¯åˆç†çš„æ–¹å¼ä¹‹ä¸€ï¼š</p>
<pre><code>*  network = hostnet (docker-ipv4=192.168.65.2, host-ipv4=192.168.65.1)
</code></pre>
<p>ä»¥ä¸Š</p>
</section>
<div class=post-tags>
<nav class="nav tags">
<ul class=tags>
<li><a href=/tags/docker>Docker</a></li>
<li><a href=/tags/osx>OSX</a></li>
</ul>
</nav>
</div>
</article>
</main>
<footer>
<hr><a class=soc href=https://github.com/timonwong title=GitHub><i data-feather=github></i></a>|âš¡ï¸
2021 Â© timonwong | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a>
</footer>
<script>feather.replace()</script></div>
</body>
</html>