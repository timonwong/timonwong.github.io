<!doctype html><html><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>ä½¿ç”¨ Minio ä¸ºé˜¿é‡Œäº‘ OSS æä¾› AWS S3 å…¼å®¹ API - Timon Wong</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Summary
ä¸å¯å¦è®¤ï¼Œç°åœ¨äº’è”ç½‘çš„ä¸€ä¸ªå¤§ã€Œå•ç‚¹ã€å°±æ˜¯å¯¹è±¡å­˜å‚¨ Amazon S3 äº†ï¼Œå¤§é‡çš„åº”ç”¨ä½¿ç”¨äº† S3 çš„ APIï¼Œè¿™å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åº”ç”¨éš¾äºè¿ç§»ã€‚è™½ç„¶æ”¹å®¢æˆ·ç«¯è¿™å±‚è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ¯•ç«Ÿä¾µå…¥æ€§å¤ªå¤§ï¼Œå¯¹äºä¸€ä¸ªæ‹¥æœ‰ä¼—å¤šæœåŠ¡çš„ç³»ç»Ÿæ¥è¯´ï¼Œå®ç°çš„æˆæœ¬æ¯”è¾ƒé«˜ã€‚
è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹æ¡ˆï¼Œå°±æ˜¯æä¾›ä¸€ä¸ª Gatewayï¼Œæä¾›ä¸ S3 å…¼å®¹çš„ API ä¾›åŸæ¥çš„å®¢æˆ·ç«¯ä½¿ç”¨ï¼›ä¸­è½¬è¯·æ±‚åæ‰“å…¥å…¶å®ƒç±»å‹çš„å¯¹è±¡å­˜å‚¨ä¸­ï¼ˆæœ¬æ–‡ä¸ºé˜¿é‡Œäº‘ OSSï¼‰ã€‚">
<meta property="og:image" content>
<meta property="og:title" content="ä½¿ç”¨ Minio ä¸ºé˜¿é‡Œäº‘ OSS æä¾› AWS S3 å…¼å®¹ API">
<meta property="og:description" content="Summary
ä¸å¯å¦è®¤ï¼Œç°åœ¨äº’è”ç½‘çš„ä¸€ä¸ªå¤§ã€Œå•ç‚¹ã€å°±æ˜¯å¯¹è±¡å­˜å‚¨ Amazon S3 äº†ï¼Œå¤§é‡çš„åº”ç”¨ä½¿ç”¨äº† S3 çš„ APIï¼Œè¿™å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åº”ç”¨éš¾äºè¿ç§»ã€‚è™½ç„¶æ”¹å®¢æˆ·ç«¯è¿™å±‚è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ¯•ç«Ÿä¾µå…¥æ€§å¤ªå¤§ï¼Œå¯¹äºä¸€ä¸ªæ‹¥æœ‰ä¼—å¤šæœåŠ¡çš„ç³»ç»Ÿæ¥è¯´ï¼Œå®ç°çš„æˆæœ¬æ¯”è¾ƒé«˜ã€‚
è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹æ¡ˆï¼Œå°±æ˜¯æä¾›ä¸€ä¸ª Gatewayï¼Œæä¾›ä¸ S3 å…¼å®¹çš„ API ä¾›åŸæ¥çš„å®¢æˆ·ç«¯ä½¿ç”¨ï¼›ä¸­è½¬è¯·æ±‚åæ‰“å…¥å…¶å®ƒç±»å‹çš„å¯¹è±¡å­˜å‚¨ä¸­ï¼ˆæœ¬æ–‡ä¸ºé˜¿é‡Œäº‘ OSSï¼‰ã€‚">
<meta property="og:type" content="article">
<meta property="og:url" content="https://theo.im/blog/2017/10/17/use-minio-with-aliyun-oss/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2017-10-17T16:56:23+00:00">
<meta property="article:modified_time" content="2017-10-17T16:56:23+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="ä½¿ç”¨ Minio ä¸ºé˜¿é‡Œäº‘ OSS æä¾› AWS S3 å…¼å®¹ API">
<meta name=twitter:description content="Summary
ä¸å¯å¦è®¤ï¼Œç°åœ¨äº’è”ç½‘çš„ä¸€ä¸ªå¤§ã€Œå•ç‚¹ã€å°±æ˜¯å¯¹è±¡å­˜å‚¨ Amazon S3 äº†ï¼Œå¤§é‡çš„åº”ç”¨ä½¿ç”¨äº† S3 çš„ APIï¼Œè¿™å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åº”ç”¨éš¾äºè¿ç§»ã€‚è™½ç„¶æ”¹å®¢æˆ·ç«¯è¿™å±‚è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ¯•ç«Ÿä¾µå…¥æ€§å¤ªå¤§ï¼Œå¯¹äºä¸€ä¸ªæ‹¥æœ‰ä¼—å¤šæœåŠ¡çš„ç³»ç»Ÿæ¥è¯´ï¼Œå®ç°çš„æˆæœ¬æ¯”è¾ƒé«˜ã€‚
è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹æ¡ˆï¼Œå°±æ˜¯æä¾›ä¸€ä¸ª Gatewayï¼Œæä¾›ä¸ S3 å…¼å®¹çš„ API ä¾›åŸæ¥çš„å®¢æˆ·ç«¯ä½¿ç”¨ï¼›ä¸­è½¬è¯·æ±‚åæ‰“å…¥å…¶å®ƒç±»å‹çš„å¯¹è±¡å­˜å‚¨ä¸­ï¼ˆæœ¬æ–‡ä¸ºé˜¿é‡Œäº‘ OSSï¼‰ã€‚">
<script src=https://theo.im/js/feather.min.js></script>
<link href=https://theo.im/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet>
<link rel=stylesheet type=text/css media=screen href=https://theo.im/css/main.2f9b5946627215dc1ae7fa5f82bfc9cfcab000329136befeea5733f21e77d68f.css>
</head>
<body>
<div class=content><header>
<div class=main>
<a href=https://theo.im/>Timon Wong</a>
</div>
<nav>
<a href=/>Home</a>
<a href=/posts>Posts</a>
<a href=/tags>Tags</a>
</nav>
</header>
<main>
<article>
<div class=title>
<h1 class=title>ä½¿ç”¨ Minio ä¸ºé˜¿é‡Œäº‘ OSS æä¾› AWS S3 å…¼å®¹ API</h1>
<div class=meta>Posted on Oct 17, 2017</div>
</div>
<section class=body>
<h2 id=summary>Summary</h2>
<p>ä¸å¯å¦è®¤ï¼Œç°åœ¨äº’è”ç½‘çš„ä¸€ä¸ªå¤§ã€Œå•ç‚¹ã€å°±æ˜¯å¯¹è±¡å­˜å‚¨ <a href=https://aws.amazon.com/s3>Amazon S3</a> äº†ï¼Œå¤§é‡çš„åº”ç”¨ä½¿ç”¨äº† S3 çš„ APIï¼Œè¿™å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åº”ç”¨éš¾äºè¿ç§»ã€‚è™½ç„¶æ”¹å®¢æˆ·ç«¯è¿™å±‚è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ¯•ç«Ÿä¾µå…¥æ€§å¤ªå¤§ï¼Œå¯¹äºä¸€ä¸ªæ‹¥æœ‰ä¼—å¤šæœåŠ¡çš„ç³»ç»Ÿæ¥è¯´ï¼Œå®ç°çš„æˆæœ¬æ¯”è¾ƒé«˜ã€‚</p>
<p>è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹æ¡ˆï¼Œå°±æ˜¯æä¾›ä¸€ä¸ª Gatewayï¼Œæä¾›ä¸ S3 å…¼å®¹çš„ API ä¾›åŸæ¥çš„å®¢æˆ·ç«¯ä½¿ç”¨ï¼›ä¸­è½¬è¯·æ±‚åæ‰“å…¥å…¶å®ƒç±»å‹çš„å¯¹è±¡å­˜å‚¨ä¸­ï¼ˆæœ¬æ–‡ä¸ºé˜¿é‡Œäº‘ <a href=https://www.aliyun.com/product/oss>OSS</a>ï¼‰ã€‚</p>
<h2 id=minio><a href=https://www.minio.io>Minio</a></h2>
<blockquote>
<p><a href=https://www.minio.io>Minio</a> æ˜¯ä¸€ä¸ªå¯¹è±¡å­˜å‚¨æœåŠ¡ï¼ŒåŸºäº Apache License v2.0 åè®®ã€‚å®ƒå®Œå…¨å…¼å®¹äºšé©¬é€Šçš„S3äº‘å‚¨å­˜æœåŠ¡ï¼Œéå¸¸é€‚åˆäºå­˜å‚¨å¾ˆå¤šéç»“æ„åŒ–çš„æ•°æ®ï¼Œä¾‹å¦‚å›¾ç‰‡ã€è§†é¢‘ã€æ—¥å¿—æ–‡ä»¶ã€å¤‡ä»½æ•°æ®å’Œå®¹å™¨/è™šæ‹Ÿæœºé•œåƒç­‰ï¼Œè€Œä¸€ä¸ªå¯¹è±¡æ–‡ä»¶å¯ä»¥æ˜¯ä»»æ„å¤§å°ï¼Œä»å‡  kb åˆ°æœ€å¤§ 5T ä¸ç­‰ã€‚</p>
</blockquote>
<p>ä¸ºäº†å¿«é€Ÿå®ç°åŸå‹ï¼Œè¿™é‡Œä½¿ç”¨ <a href=https://www.minio.io>Minio</a> ä¸ºä¾‹ï¼Œå› ä¸ºå®ƒæä¾›äº†ä¸€å¥—å…¼å®¹ <a href=https://aws.amazon.com/s3>Amazon S3</a> çš„ APIï¼Œæ ¹æ® <a href=https://www.minio.io>Minio</a> å†…éƒ¨çš„ Gateway æ¥å£ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥è‡ªå·±æä¾›ä¸€ä¸ª Gateway å®ç°ï¼Œç”¨æ¥è½¬å‘åˆ°é˜¿é‡Œäº‘ <a href=https://www.aliyun.com/product/oss>OSS</a> ã€‚</p>
<p>æ³¨æ„ï¼Œè¿™é‡Œç•¥è¿‡ä¸€äº›æ€§èƒ½åŠåŠŸèƒ½æ–¹é¢çš„è€ƒé‡ã€‚</p>
<h2 id=minio-gateway>Minio Gateway</h2>
<p>ç¿»é˜…æºä»£ç ï¼ŒMinio å·²ç»å…·æœ‰ä¸‹é¢å‡ ä¸ª Gateway å®ç°ï¼š</p>
<ul>
<li><a href=https://github.com/minio/minio/blob/3d2d63f71e04404be70fda9653394915f4e7458a/cmd/gateway-s3.go>Amazon S3</a></li>
<li><a href=https://github.com/minio/minio/blob/3d2d63f71e04404be70fda9653394915f4e7458a/cmd/gateway-gcs.go>Google Cloud Storage</a> å…¶å®æœ¬è´¨ä¸Šæ˜¯ AWS S3 å…¼å®¹ API</li>
<li><a href=https://github.com/minio/minio/blob/3d2d63f71e04404be70fda9653394915f4e7458a/cmd/gateway-azure.go>Azure Storage</a></li>
<li><a href=https://github.com/minio/minio/blob/3d2d63f71e04404be70fda9653394915f4e7458a/cmd/gateway-b2.go>Backblaze B2</a></li>
</ul>
<p>ä»¥ä¸Š Gateway çš„æœ€ç»ˆç”¨æˆ·ä½¿ç”¨æ–‡æ¡£å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°: <a href=https://github.com/minio/minio/tree/3d2d63f71e04404be70fda9653394915f4e7458a/docs/gateway>https://github.com/minio/minio/tree/3d2d63f71e04404be70fda9653394915f4e7458a/docs/gateway</a></p>
<h3 id=interface>Interface</h3>
<p>ä¸€ä¸ª Gateway éœ€è¦å®ç° GatewayLayer æ¥å£ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// ObjectLayer implements primitives for object API layer.
</span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ObjectLayer</span> <span style=color:#66d9ef>interface</span> {
    <span style=color:#75715e>// Storage operations.
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>Shutdown</span>() <span style=color:#66d9ef>error</span>
    <span style=color:#a6e22e>StorageInfo</span>() <span style=color:#a6e22e>StorageInfo</span>

    <span style=color:#75715e>// Bucket operations.
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>MakeBucketWithLocation</span>(<span style=color:#a6e22e>bucket</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>location</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>error</span>
    <span style=color:#a6e22e>GetBucketInfo</span>(<span style=color:#a6e22e>bucket</span> <span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>bucketInfo</span> <span style=color:#a6e22e>BucketInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>ListBuckets</span>() (<span style=color:#a6e22e>buckets</span> []<span style=color:#a6e22e>BucketInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>DeleteBucket</span>(<span style=color:#a6e22e>bucket</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>error</span>
    <span style=color:#a6e22e>ListObjects</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>prefix</span>, <span style=color:#a6e22e>marker</span>, <span style=color:#a6e22e>delimiter</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>maxKeys</span> <span style=color:#66d9ef>int</span>) (<span style=color:#a6e22e>result</span> <span style=color:#a6e22e>ListObjectsInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)

    <span style=color:#75715e>// Object operations.
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>GetObject</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>startOffset</span> <span style=color:#66d9ef>int64</span>, <span style=color:#a6e22e>length</span> <span style=color:#66d9ef>int64</span>, <span style=color:#a6e22e>writer</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Writer</span>) (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>GetObjectInfo</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span> <span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>objInfo</span> <span style=color:#a6e22e>ObjectInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>PutObject</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>data</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>HashReader</span>, <span style=color:#a6e22e>metadata</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>objInfo</span> <span style=color:#a6e22e>ObjectInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>CopyObject</span>(<span style=color:#a6e22e>srcBucket</span>, <span style=color:#a6e22e>srcObject</span>, <span style=color:#a6e22e>destBucket</span>, <span style=color:#a6e22e>destObject</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>metadata</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>objInfo</span> <span style=color:#a6e22e>ObjectInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>DeleteObject</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>error</span>

    <span style=color:#75715e>// Multipart operations.
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>ListMultipartUploads</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>prefix</span>, <span style=color:#a6e22e>keyMarker</span>, <span style=color:#a6e22e>uploadIDMarker</span>, <span style=color:#a6e22e>delimiter</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>maxUploads</span> <span style=color:#66d9ef>int</span>) (<span style=color:#a6e22e>result</span> <span style=color:#a6e22e>ListMultipartsInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>NewMultipartUpload</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>metadata</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>uploadID</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>CopyObjectPart</span>(<span style=color:#a6e22e>srcBucket</span>, <span style=color:#a6e22e>srcObject</span>, <span style=color:#a6e22e>destBucket</span>, <span style=color:#a6e22e>destObject</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>uploadID</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>partID</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>startOffset</span> <span style=color:#66d9ef>int64</span>, <span style=color:#a6e22e>length</span> <span style=color:#66d9ef>int64</span>) (<span style=color:#a6e22e>info</span> <span style=color:#a6e22e>PartInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>PutObjectPart</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span>, <span style=color:#a6e22e>uploadID</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>partID</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>data</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>HashReader</span>) (<span style=color:#a6e22e>info</span> <span style=color:#a6e22e>PartInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>ListObjectParts</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span>, <span style=color:#a6e22e>uploadID</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>partNumberMarker</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>maxParts</span> <span style=color:#66d9ef>int</span>) (<span style=color:#a6e22e>result</span> <span style=color:#a6e22e>ListPartsInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>AbortMultipartUpload</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span>, <span style=color:#a6e22e>uploadID</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>error</span>
    <span style=color:#a6e22e>CompleteMultipartUpload</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span>, <span style=color:#a6e22e>uploadID</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>uploadedParts</span> []<span style=color:#a6e22e>completePart</span>) (<span style=color:#a6e22e>objInfo</span> <span style=color:#a6e22e>ObjectInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)

    <span style=color:#75715e>// Healing operations.
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>HealBucket</span>(<span style=color:#a6e22e>bucket</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>error</span>
    <span style=color:#a6e22e>ListBucketsHeal</span>() (<span style=color:#a6e22e>buckets</span> []<span style=color:#a6e22e>BucketInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>HealObject</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span> <span style=color:#66d9ef>string</span>) (<span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>ListObjectsHeal</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>prefix</span>, <span style=color:#a6e22e>marker</span>, <span style=color:#a6e22e>delimiter</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>maxKeys</span> <span style=color:#66d9ef>int</span>) (<span style=color:#a6e22e>ListObjectsInfo</span>, <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>ListUploadsHeal</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>prefix</span>, <span style=color:#a6e22e>marker</span>, <span style=color:#a6e22e>uploadIDMarker</span>,
        <span style=color:#a6e22e>delimiter</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>maxUploads</span> <span style=color:#66d9ef>int</span>) (<span style=color:#a6e22e>ListMultipartsInfo</span>, <span style=color:#66d9ef>error</span>)
}

<span style=color:#75715e>// GatewayLayer - Interface to implement gateway mode.
</span><span style=color:#75715e></span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>GatewayLayer</span> <span style=color:#66d9ef>interface</span> {
    <span style=color:#a6e22e>ObjectLayer</span>

    <span style=color:#a6e22e>AnonGetObject</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>startOffset</span> <span style=color:#66d9ef>int64</span>, <span style=color:#a6e22e>length</span> <span style=color:#66d9ef>int64</span>, <span style=color:#a6e22e>writer</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Writer</span>) (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>AnonGetObjectInfo</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>object</span> <span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>objInfo</span> <span style=color:#a6e22e>ObjectInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)

    <span style=color:#a6e22e>AnonPutObject</span>(<span style=color:#a6e22e>bucket</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>object</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>size</span> <span style=color:#66d9ef>int64</span>, <span style=color:#a6e22e>data</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Reader</span>, <span style=color:#a6e22e>metadata</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>sha256sum</span> <span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>ObjectInfo</span>, <span style=color:#66d9ef>error</span>)

    <span style=color:#a6e22e>SetBucketPolicies</span>(<span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>policy</span>.<span style=color:#a6e22e>BucketAccessPolicy</span>) <span style=color:#66d9ef>error</span>
    <span style=color:#a6e22e>GetBucketPolicies</span>(<span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>policy</span>.<span style=color:#a6e22e>BucketAccessPolicy</span>, <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>DeleteBucketPolicies</span>(<span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>error</span>
    <span style=color:#a6e22e>AnonListObjects</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>prefix</span>, <span style=color:#a6e22e>marker</span>, <span style=color:#a6e22e>delimiter</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>maxKeys</span> <span style=color:#66d9ef>int</span>) (<span style=color:#a6e22e>result</span> <span style=color:#a6e22e>ListObjectsInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>AnonListObjectsV2</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>prefix</span>, <span style=color:#a6e22e>continuationToken</span>, <span style=color:#a6e22e>delimiter</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>maxKeys</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>fetchOwner</span> <span style=color:#66d9ef>bool</span>, <span style=color:#a6e22e>startAfter</span> <span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>result</span> <span style=color:#a6e22e>ListObjectsV2Info</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>ListObjectsV2</span>(<span style=color:#a6e22e>bucket</span>, <span style=color:#a6e22e>prefix</span>, <span style=color:#a6e22e>continuationToken</span>, <span style=color:#a6e22e>delimiter</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>maxKeys</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>fetchOwner</span> <span style=color:#66d9ef>bool</span>, <span style=color:#a6e22e>startAfter</span> <span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>result</span> <span style=color:#a6e22e>ListObjectsV2Info</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
    <span style=color:#a6e22e>AnonGetBucketInfo</span>(<span style=color:#a6e22e>bucket</span> <span style=color:#66d9ef>string</span>) (<span style=color:#a6e22e>bucketInfo</span> <span style=color:#a6e22e>BucketInfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
}
</code></pre></div><p>å¯¹äºéƒ¨åˆ†ä¸æ”¯æŒçš„æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ç•™æ¡©ä»£ç è¿”å› <code>NotImplemented</code> é”™è¯¯ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ª <a href=https://github.com/minio/minio/blob/3d2d63f71e04404be70fda9653394915f4e7458a/cmd/gateway-unsupported.go><code>gatewayUnsupported</code></a> å¯ä¾›å‚è€ƒã€‚</p>
<h3 id=implementation>Implementation</h3>
<p>å°†ä¸Šé¢çš„å†…å®¹ææ¸…æ¥šåï¼Œå‰©ä¸‹çš„å·¥ä½œå°±åªæ˜¯å°†ç›¸åº”çš„ä»£ç å¥—è¿›ä¸Šé¢çš„æ¥å£äº†ï¼Œæ²¡æœ‰å¤ªå¤šæŠ€æœ¯å«é‡ã€‚</p>
<p>é˜¿é‡Œäº‘ OSS API é£æ ¼æœ‰å¾ˆé‡çš„ AWS S3 ç—•è¿¹ï¼Œæ‰€ä»¥è¿™ä¸ªã€Œç¿»è¯‘ã€å·¥ä½œå¾ˆæ²¡æœ‰æŒ‘æˆ˜æ€§ğŸ˜œã€‚</p>
<p><strong>EDIT(2017-10-23)</strong> Pull Request è¯·çœ‹ <a href=https://github.com/minio/minio/pull/5103>minio/minio#5103</a></p>
<p><strong>EDIT(2017-12-19)</strong> Minio ä¸Šæ¸¸å·²ç»åˆå¹¶äº† PRï¼Œä»¥åå°±èƒ½ç›´æ¥ä½¿ç”¨äº† :)</p>
<p>æƒ³åæ§½çš„æ˜¯ minio é‡Œé¢ç»“æ„æ¯”è¾ƒä¹±ï¼ŒåŠ ä¸€ä¸ª Gateway è¦æ”¹å¾ˆå¤šæ–‡ä»¶ï¼Œæ‰€ä»¥åˆæäº¤äº†ä¸€ä¸ª PR: <a href=https://github.com/minio/minio/pull/5111>minio/minio#5111</a></p>
</section>
<div class=post-tags>
<nav class="nav tags">
<ul class=tags>
<li><a href=/tags/aws>AWS</a></li>
<li><a href=/tags/s3>S3</a></li>
<li><a href=/tags/oss>OSS</a></li>
</ul>
</nav>
</div>
</article>
</main>
<footer>
<hr><a class=soc href=https://github.com/timonwong title=GitHub><i data-feather=github></i></a>|âš¡ï¸
2021 Â© timonwong | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a>
</footer>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-35644871-2','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<script>feather.replace()</script></div>
</body>
</html>