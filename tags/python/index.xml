<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Python on Timon Wong</title><link>https://theo.im/tags/python/</link><description>Recent content in Python on Timon Wong</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>© timonwong</copyright><lastBuildDate>Wed, 13 Aug 2014 00:00:00 +0000</lastBuildDate><atom:link href="https://theo.im/tags/python/index.xml" rel="self" type="application/rss+xml"/><item><title>在 Python 中统计文本字符个数</title><link>https://theo.im/blog/2014/08/13/count-text-element-count-in-python/</link><pubDate>Wed, 13 Aug 2014 00:00:00 +0000</pubDate><guid>https://theo.im/blog/2014/08/13/count-text-element-count-in-python/</guid><description>&lt;p>字符集向来都是一个大问题，即使是 Python 3.x，也最多只是能说感谢 &lt;a href="http://en.wikipedia.org/wiki/Unicode">Unicode&lt;/a> 字符集，字符串的存取现在没有问题了。&lt;/p>
&lt;p>Unicode 字符集的常见&lt;strong>编码&lt;/strong>有 &lt;a href="http://en.wikipedia.org/wiki/UTF-8">UTF-8&lt;/a>、&lt;a href="http://en.wikipedia.org/wiki/UTF-16">UTF-16&lt;/a>、&lt;a href="http://en.wikipedia.org/wiki/UTF-32">UTF-32&lt;/a> 等常见格式，另外，&lt;a href="http://en.wikipedia.org/wiki/GB_18030">GB18030&lt;/a> 也可以算其中一种（ GB18030，与 UTF-8 类似，是一种变长编码格式，最大的优势就是兼容 &lt;a href="http://en.wikipedia.org/wiki/GBK">GBK&lt;/a>/&lt;a href="http://en.wikipedia.org/wiki/GB2312">GB2312&lt;/a> ）&lt;/p>
&lt;p>但是 Unicode 就能无痛的解决所有问题吗？答案是否定的。&lt;/p></description></item><item><title>使用 FPM 创建 Python 的 RPM 包</title><link>https://theo.im/blog/2014/05/16/use-fpm-to-create-python-rpm-packages/</link><pubDate>Fri, 16 May 2014 00:00:00 +0000</pubDate><guid>https://theo.im/blog/2014/05/16/use-fpm-to-create-python-rpm-packages/</guid><description>生成 RPM 包太麻烦了，最近知道了一个名为 FPM 的神器，在此记录一下。
安装 FPM NOTE: 测试系统为 RedHat 系的 CentOS 6.3，编译 Python 2.7.6 的 RPM 包。
安装 Ruby 由于 FPM 使用 Ruby 写成，因此系统中需要安装 Ruby 的运行环境（这里 gem 的源改为了 taobao 的镜像）：
# Install ruby dependencies yum -y install ruby rubygems ruby-devel # Use taobao repo for ruby gems gem sources -a http://ruby.taobao.org/ # Remove origin repo from ruby gems gem sources --remove http://rubygems.org/ 通过 Gem 安装 FPM 在 Ruby 安装完成后，就可以使用 gem 安装 FPM 了：</description></item><item><title>RabbitMQ笔记（三）: Pika客户端（Python）发送大尺寸消息的问题</title><link>https://theo.im/blog/2014/05/15/rabbitmq-note-3-pika-send-large-message/</link><pubDate>Thu, 15 May 2014 00:00:00 +0000</pubDate><guid>https://theo.im/blog/2014/05/15/rabbitmq-note-3-pika-send-large-message/</guid><description>问题描述 这个问题存在很久了，现象就是使用 Pika 库的客户端在发送大尺寸消息后，RabbitMQ 没有收到，Consumer 那里会认为消息已丢失。
NOTE: 即使在本文写时的最新版(v0.9.13)依然存在这个问题。
分析 因为网络状态很好，所以没有考虑网络的错误，直接考虑Pika库的问题。
那么第一步就是把 Pika 的代码拿来读一遍，主要看它是怎么发送消息的，经过一番探索，找到了 pika/adapters/base_connection.py 这个文件，来看看里面的内容：
def _handle_write(self): &amp;#34;&amp;#34;&amp;#34;Handle any outbound buffer writes that need to take place.&amp;#34;&amp;#34;&amp;#34; total_written = 0 if self.outbound_buffer: try: bytes_written = self.socket.send(self.outbound_buffer.popleft()) except socket.timeout: raise except socket.error, error: return self._handle_error(error) total_written += bytes_written return total_written 看出问题了吗？
来看看socket.send的文档吧：
Send data to the socket. The socket must be connected to a remote socket. The optional flags argument has the same meaning as for recv() above.</description></item></channel></rss>